(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{L2jE:function(t,e,s){"use strict";s.r(e),s.d(e,"HostsModule",(function(){return g}));var n=s("ofXK"),i=s("tyNb"),o=s("Mn71"),a=s("fXoL"),c=s("xsI5"),r=s("OaWH"),l=s("HFyB");function d(t,e){if(1&t&&(a.Ub(0,"div",6),a.Qb(1,"img",7),a.Tb()),2&t){const t=a.kc();a.Ab(1),a.rc("src",t.appService.assets("/images/ajax-loader.gif"),a.Fc)}}function b(t,e){1&t&&(a.Ub(0,"div",8),a.Mc(1,"No DATA"),a.Tb())}function p(t,e){if(1&t&&(a.Ub(0,"tr"),a.Ub(1,"td"),a.Mc(2),a.Tb(),a.Ub(3,"td"),a.Mc(4),a.lc(5,"date"),a.Tb(),a.Ub(6,"td"),a.Mc(7),a.lc(8,"date"),a.Tb(),a.Ub(9,"td"),a.Mc(10),a.Tb(),a.Ub(11,"td"),a.Mc(12),a.Tb(),a.Ub(13,"td"),a.Mc(14),a.Tb(),a.Ub(15,"td"),a.Mc(16),a.Tb(),a.Tb()),2&t){const t=e.$implicit,s=a.kc(2);a.Ab(2),a.Nc(t.hostname),a.Ab(2),a.Nc(a.nc(5,7,s.dateTime(t.last_seen),"dd MMM yyyy hh:mm a")),a.Ab(3),a.Nc(a.nc(8,10,s.dateTime(t.first_seen),"dd MMM yyyy hh:mm a")),a.Ab(3),a.Nc(t.os_version),a.Ab(2),a.Nc(t.system_product_name),a.Ab(2),a.Nc(t.product_type_desc),a.Ab(2),a.Nc(s.formatString(t.status))}}function h(t,e){if(1&t&&(a.Ub(0,"table",9),a.Ub(1,"thead"),a.Ub(2,"tr"),a.Ub(3,"th"),a.Mc(4,"Hostname"),a.Tb(),a.Ub(5,"th"),a.Mc(6,"Last seen"),a.Tb(),a.Ub(7,"th"),a.Mc(8,"First seen"),a.Tb(),a.Ub(9,"th"),a.Mc(10,"OS version"),a.Tb(),a.Ub(11,"th"),a.Mc(12,"Model"),a.Tb(),a.Ub(13,"th"),a.Mc(14,"Type"),a.Tb(),a.Ub(15,"th"),a.Mc(16,"Status"),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"tbody"),a.Kc(18,p,17,13,"tr",10),a.Tb(),a.Tb()),2&t){const t=a.kc();a.Ab(18),a.rc("ngForOf",t.detectionsFiltered)}}const f=[{path:"",component:(()=>{class t{constructor(t,e,s){this._css=t,this.appService=e,this.router=s,this.detectionsFiltered=[],this.filterCol=[{title:"Platform",fields:[],prop:"platform_name"},{title:"OS Version",fields:[],prop:"os_version"},{title:"Type",fields:[],prop:"product_type_desc"},{title:"Status",fields:[],prop:"status"}],this.filterChips=[],this.loading=!0,this.nodata=!1,this.csvData={name:"Hosts.csv",data:""},this._css.ready.subscribe(()=>{setTimeout(()=>{this.updateTable()},1e3)})}ngOnInit(){this.router.events.subscribe(t=>{t instanceof i.b&&window.scrollTo(0,0)}),this.appService.setPath("Home/Dashboard/Hosts"),""!=this._css.access_token&&this.updateTable()}getDate(t){return new Date(t)}truncateSentance(t){return t.substr(0,25)+"..."}updateTable(t=null){let e=null;null==t&&this._css.currentHostFilterId>=1&&(e=this._css.buildFilterFor(this._css.currentHostFilterId),t=e.filter,this.filterChips=e.chips),this.loading=!0,this.detectionsFiltered=[],this._css._30DayDetections(0,t).subscribe(t=>{console.clear(),0==t.length&&(this.loading=!1),"error"!=t?this._css._30DayDetectionsSummries(t).subscribe(t=>{"error"!=t&&(this.loading=!1,this.detectionsFiltered=t,this.generateCSV(t),this.getFieldValues(t),this._css.currentHostFilterId>=1&&(this.getFieldValues(t),this._css.currentHostFilterId=0,window.scrollTo(0,0)))}):this.loading=!1})}generateCSV(t){let e="data:text/csv;charset=utf-8,";e+="Hostname,Last seen,First seen,OS version,Model,Type,Status\n",e+=t.map(t=>{let e=t.hostname+",";return e+=o.a.formatDate(t.last_seen,"DD MMM YYYY hh:mm a")+",",e+=o.a.formatDate(t.first_seen,"DD MMM YYYY hh:mm a")+",",e+=t.os_version+",",e+=t.system_product_name+",",e+=t.product_type_desc+",",e+=o.a.allWordUppercase(t.status),e}).join("\n"),this.csvData={name:"Hosts.csv",data:e}}dateTime(t){return new Date(t)}getFieldValues(t){this.filterCol.map(t=>{t.fields.map(t=>{t.count=0})}),t.map(t=>{this.canPush(this.filterCol[0].fields,"label",t.platform_name),this.canPush(this.filterCol[1].fields,"label",t.os_version),this.canPush(this.filterCol[2].fields,"label",t.product_type_desc),this.canPush(this.filterCol[3].fields,"label",o.a.allWordUppercase(t.status))})}formatString(t){return o.a.allWordUppercase(t)}canPush(t,e,s){0==t.filter(t=>t[e].toLowerCase()==s.toLowerCase()&&(t.count=null==t.count?1:t.count+1,!0)).length&&t.push({label:s,selected:!1,count:1,prop:s})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(c.a),a.Pb(r.a),a.Pb(i.c))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-hosts"]],decls:6,vars:7,consts:[[1,"container-fluid","full-page","p-0"],["addedFor","hosts",1,".filter-sec",3,"totalDetections","filterCol","filterChips","csvData","filterSelection"],[1,"container-fluid"],["class","loader",4,"ngIf"],["class","nodata",4,"ngIf"],["class","table",4,"ngIf"],[1,"loader"],[3,"src"],[1,"nodata"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(a.Ub(0,"section",0),a.Ub(1,"filter-selection",1),a.gc("filterSelection",(function(t){return e.updateTable(t)})),a.Tb(),a.Ub(2,"section",2),a.Kc(3,d,2,1,"div",3),a.Kc(4,b,2,0,"div",4),a.Kc(5,h,19,1,"table",5),a.Tb(),a.Tb()),2&t&&(a.Ab(1),a.rc("totalDetections",e.detectionsFiltered.length)("filterCol",e.filterCol)("filterChips",e.filterChips)("csvData",e.csvData),a.Ab(2),a.rc("ngIf",e.loading),a.Ab(1),a.rc("ngIf",e.nodata),a.Ab(1),a.rc("ngIf",!e.loading&&!e.nodata))},directives:[l.a,n.m,n.l],pipes:[n.d],styles:[".full-page[_ngcontent-%COMP%]{height:100vh;overflow:auto;padding-top:1em}.loader[_ngcontent-%COMP%]{text-align:center;padding-top:2em}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1em .5em;font-size:.9em}.table[_ngcontent-%COMP%]   .priority-icon[_ngcontent-%COMP%]{color:#ffab00;float:left}.table[_ngcontent-%COMP%]   .priority-data[_ngcontent-%COMP%]{padding-top:5px;padding-left:15px;font-size:.8em;float:left}.table[_ngcontent-%COMP%]   .col-2-title[_ngcontent-%COMP%]{text-transform:uppercase;color:#696969;font-size:.65em}.table[_ngcontent-%COMP%]   .col-2-data[_ngcontent-%COMP%]{font-size:.8em}"]}),t})()}];let u=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(f)],i.e]}),t})();var m=s("OZVm");let g=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[n.b,u,m.a]]}),t})()}}]);